!function(t,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var e=r();for(var n in e)("object"==typeof exports?exports:t)[n]=e[n]}}(this,function(){return function(t){function r(n){if(e[n])return e[n].exports;var a=e[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}var e={};return r.m=t,r.c=e,r.p="",r(0)}({0:function(t,r,e){t.exports=e(48)},1:function(t,r){"use strict";var e={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},funcOrValue:function(t,r){if("function"==typeof t){var e=t.call(r);return e}return t},execFuncs:function(t,r,n){if(t&&(e.isArray(n)||(n=[n])),"function"==typeof t)return t.apply(r,n);if(e.isArray(t)){var a=[];return t.forEach(function(t){a.push(t&&t.apply(r,n))}),a}},blend:["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],pointInRect:function(t,r,e,n,a,o){return!(e>t||t>n||a>r||r>o)},firstValuable:function(t,r,e){return void 0===t?void 0===r?e:r:t}};t.exports=e},3:function(t,r){"use strict";var e=3.141593;t.exports=function(t,r,n,a,o,i){var c=o?-o/180*e:0,u=(t-n)*Math.cos(c)-(r-a)*Math.sin(c)+n,s=(t-n)*Math.sin(c)+(r-a)*Math.cos(c)+a;return i?[u,s]:{x:u,y:s}}},4:function(t,r){"use strict";function e(t,r){if(t&&t.match(/^data:/))return void(r&&r(t));if(a[t])return void(a[t]!==n?r(a[t]):setTimeout(function(){e(t,r)},100));a[t]=n;var o=new XMLHttpRequest;o.onload=function(){var e=new FileReader;e.onloadend=function(){a[t]=e.result,r&&r(e.result)},e.readAsDataURL(o.response)},o.open("GET",t),o.responseType="blob",o.send()}var n="processing",a={};t.exports=e},20:function(t,r){"use strict";t.exports=function(){function t(t,r,e){e=e||new Float32Array(16);var n=r[0],a=r[1],o=r[2],i=r[3],c=r[4],u=r[5],s=r[6],f=r[7],l=r[8],d=r[9],h=r[10],v=r[11],p=r[12],g=r[13],A=r[14],x=r[15],R=t[0],_=t[1],m=t[2],y=t[3],E=t[4],b=t[5],w=t[6],T=t[7],F=t[8],M=t[9],L=t[10],B=t[11],D=t[12],U=t[13],S=t[14],P=t[15];return e[0]=n*R+a*E+o*F+i*D,e[1]=n*_+a*b+o*M+i*U,e[2]=n*m+a*w+o*L+i*S,e[3]=n*y+a*T+o*B+i*P,e[4]=c*R+u*E+s*F+f*D,e[5]=c*_+u*b+s*M+f*U,e[6]=c*m+u*w+s*L+f*S,e[7]=c*y+u*T+s*B+f*P,e[8]=l*R+d*E+h*F+v*D,e[9]=l*_+d*b+h*M+v*U,e[10]=l*m+d*w+h*L+v*S,e[11]=l*y+d*T+h*B+v*P,e[12]=p*R+g*E+A*F+x*D,e[13]=p*_+g*b+A*M+x*U,e[14]=p*m+g*w+A*L+x*S,e[15]=p*y+g*T+A*B+x*P,e}function r(t,r,e){return e=e||new Float32Array(3),e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function e(t,r,e){return e=e||new Float32Array(3),e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function n(t,r){r=r||new Float32Array(3);var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return e>1e-5&&(r[0]=t[0]/e,r[1]=t[1]/e,r[2]=t[2]/e),r}function a(t,r,e){return e=e||new Float32Array(3),e[0]=t[1]*r[2]-t[2]*r[1],e[1]=t[2]*r[0]-t[0]*r[2],e[2]=t[0]*r[1]-t[1]*r[0],e}function o(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function i(t,r){var e=t[0]-r[0],n=t[1]-r[1],a=t[2]-r[2];return e*e+n*n+a*a}function c(t,r){return Math.sqrt(i(t,r))}function u(t){return t=t||new Float32Array(16),t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function s(t,r){return r=r||new Float32Array(16),r[0]=t[0],r[1]=t[4],r[2]=t[8],r[3]=t[12],r[4]=t[1],r[5]=t[5],r[6]=t[9],r[7]=t[13],r[8]=t[2],r[9]=t[6],r[10]=t[10],r[11]=t[14],r[12]=t[3],r[13]=t[7],r[14]=t[11],r[15]=t[15],r}function f(t,r,o,i){i=i||new Float32Array(16);var c=n(e(t,r)),u=n(a(o,c)),s=n(a(c,u));return i[0]=u[0],i[1]=u[1],i[2]=u[2],i[3]=0,i[4]=s[0],i[5]=s[1],i[6]=s[2],i[7]=0,i[8]=c[0],i[9]=c[1],i[10]=c[2],i[11]=0,i[12]=t[0],i[13]=t[1],i[14]=t[2],i[15]=1,i}function l(t,r,e,n,a){a=a||new Float32Array(16);var o=Math.tan(.5*Math.PI-.5*t),i=1/(e-n);return a[0]=o/r,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=o,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+n)*i,a[11]=-1,a[12]=0,a[13]=0,a[14]=e*n*i*2,a[15]=0,a}function d(t,r,e,n,a,o,i){return i=i||new Float32Array(16),i[0]=2/(r-t),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(n-e),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(a-o),i[11]=0,i[12]=(t+r)/(t-r),i[13]=(e+n)/(e-n),i[14]=(a+o)/(a-o),i[15]=1,i}function h(t,r,e,n,a,o){var i=r-t,c=n-e,u=o-a;return dst[0]=2*a/i,dst[1]=0,dst[2]=0,dst[3]=0,dst[4]=0,dst[5]=2*a/c,dst[6]=0,dst[7]=0,dst[8]=(t+r)/i,dst[9]=(n+e)/c,dst[10]=-(o+a)/u,dst[11]=-1,dst[12]=0,dst[13]=0,dst[14]=-2*a*o/u,dst[15]=0,dst}function v(t,r,e,n){return n=n||new Float32Array(16),n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=t,n[13]=r,n[14]=e,n[15]=1,n}function p(t,r,e,n,a){a=a||new Float32Array(16);var o=t[0],i=t[1],c=t[2],u=t[3],s=t[4],f=t[5],l=t[6],d=t[7],h=t[8],v=t[9],p=t[10],g=t[11],A=t[12],x=t[13],R=t[14],_=t[15];return t!==a&&(a[0]=o,a[1]=i,a[2]=c,a[3]=u,a[4]=s,a[5]=f,a[6]=l,a[7]=d,a[8]=h,a[9]=v,a[10]=p,a[11]=g),a[12]=o*r+s*e+h*n+A,a[13]=i*r+f*e+v*n+x,a[14]=c*r+l*e+p*n+R,a[15]=u*r+d*e+g*n+_,a}function g(t,r){r=r||new Float32Array(16);var e=Math.cos(t),n=Math.sin(t);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e,r[6]=n,r[7]=0,r[8]=0,r[9]=-n,r[10]=e,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function A(t,r,e){e=e||new Float32Array(16);var n=t[4],a=t[5],o=t[6],i=t[7],c=t[8],u=t[9],s=t[10],f=t[11],l=Math.cos(r),d=Math.sin(r);return e[4]=l*n+d*c,e[5]=l*a+d*u,e[6]=l*o+d*s,e[7]=l*i+d*f,e[8]=l*c-d*n,e[9]=l*u-d*a,e[10]=l*s-d*o,e[11]=l*f-d*i,t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e}function x(t,r){r=r||new Float32Array(16);var e=Math.cos(t),n=Math.sin(t);return r[0]=e,r[1]=0,r[2]=-n,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=n,r[9]=0,r[10]=e,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function R(t,r,e){e=e||new Float32Array(16);var n=t[0],a=t[1],o=t[2],i=t[3],c=t[8],u=t[9],s=t[10],f=t[11],l=Math.cos(r),d=Math.sin(r);return e[0]=l*n-d*c,e[1]=l*a-d*u,e[2]=l*o-d*s,e[3]=l*i-d*f,e[8]=l*c+d*n,e[9]=l*u+d*a,e[10]=l*s+d*o,e[11]=l*f+d*i,t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e}function _(t,r){r=r||new Float32Array(16);var e=Math.cos(t),n=Math.sin(t);return r[0]=e,r[1]=n,r[2]=0,r[3]=0,r[4]=-n,r[5]=e,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function m(t,r,e){e=e||new Float32Array(16);var n=t[0],a=t[1],o=t[2],i=t[3],c=t[4],u=t[5],s=t[6],f=t[7],l=Math.cos(r),d=Math.sin(r);return e[0]=l*n+d*c,e[1]=l*a+d*u,e[2]=l*o+d*s,e[3]=l*i+d*f,e[4]=l*c-d*n,e[5]=l*u-d*a,e[6]=l*s-d*o,e[7]=l*f-d*i,t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e}function y(t,r,e){e=e||new Float32Array(16);var n=t[0],a=t[1],o=t[2],i=Math.sqrt(n*n+a*a+o*o);n/=i,a/=i,o/=i;var c=n*n,u=a*a,s=o*o,f=Math.cos(r),l=Math.sin(r),d=1-f;return e[0]=c+(1-c)*f,e[1]=n*a*d+o*l,e[2]=n*o*d-a*l,e[3]=0,e[4]=n*a*d-o*l,e[5]=u+(1-u)*f,e[6]=a*o*d+n*l,e[7]=0,e[8]=n*o*d+a*l,e[9]=a*o*d-n*l,e[10]=s+(1-s)*f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function E(t,r,e,n){n=n||new Float32Array(16);var a=r[0],o=r[1],i=r[2],c=Math.sqrt(a*a+o*o+i*i);a/=c,o/=c,i/=c;var u=a*a,s=o*o,f=i*i,l=Math.cos(e),d=Math.sin(e),h=1-l,v=u+(1-u)*l,p=a*o*h+i*d,g=a*i*h-o*d,A=a*o*h-i*d,x=s+(1-s)*l,R=o*i*h+a*d,_=a*i*h+o*d,m=o*i*h-a*d,y=f+(1-f)*l,E=t[0],b=t[1],w=t[2],T=t[3],F=t[4],M=t[5],L=t[6],B=t[7],D=t[8],U=t[9],S=t[10],P=t[11];return n[0]=v*E+p*F+g*D,n[1]=v*b+p*M+g*U,n[2]=v*w+p*L+g*S,n[3]=v*T+p*B+g*P,n[4]=A*E+x*F+R*D,n[5]=A*b+x*M+R*U,n[6]=A*w+x*L+R*S,n[7]=A*T+x*B+R*P,n[8]=_*E+m*F+y*D,n[9]=_*b+m*M+y*U,n[10]=_*w+m*L+y*S,n[11]=_*T+m*B+y*P,t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n}function b(t,r,e,n){return n=n||new Float32Array(16),n[0]=t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=r,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=e,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function w(t,r,e,n,a){return a=a||new Float32Array(16),a[0]=r*t[0],a[1]=r*t[1],a[2]=r*t[2],a[3]=r*t[3],a[4]=e*t[4],a[5]=e*t[5],a[6]=e*t[6],a[7]=e*t[7],a[8]=n*t[8],a[9]=n*t[9],a[10]=n*t[10],a[11]=n*t[11],t!==a&&(a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15]),a}function T(t,r){r=r||new Float32Array(16);var e=t[0],n=t[1],a=t[2],o=t[3],i=t[4],c=t[5],u=t[6],s=t[7],f=t[8],l=t[9],d=t[10],h=t[11],v=t[12],p=t[13],g=t[14],A=t[15],x=d*A,R=g*h,_=u*A,m=g*s,y=u*h,E=d*s,b=a*A,w=g*o,T=a*h,F=d*o,M=a*s,L=u*o,B=f*p,D=v*l,U=i*p,S=v*c,P=i*l,I=f*c,N=e*p,$=v*n,C=e*l,z=f*n,X=e*c,G=i*n,Y=x*c+m*l+y*p-(R*c+_*l+E*p),O=R*n+b*l+F*p-(x*n+w*l+T*p),V=_*n+w*c+M*p-(m*n+b*c+L*p),W=E*n+T*c+L*l-(y*n+F*c+M*l),q=1/(e*Y+i*O+f*V+v*W);return r[0]=q*Y,r[1]=q*O,r[2]=q*V,r[3]=q*W,r[4]=q*(R*i+_*f+E*v-(x*i+m*f+y*v)),r[5]=q*(x*e+w*f+T*v-(R*e+b*f+F*v)),r[6]=q*(m*e+b*i+L*v-(_*e+w*i+M*v)),r[7]=q*(y*e+F*i+M*f-(E*e+T*i+L*f)),r[8]=q*(B*s+S*h+P*A-(D*s+U*h+I*A)),r[9]=q*(D*o+N*h+z*A-(B*o+$*h+C*A)),r[10]=q*(U*o+$*s+X*A-(S*o+N*s+G*A)),r[11]=q*(I*o+C*s+G*h-(P*o+z*s+X*h)),r[12]=q*(U*d+I*g+D*u-(P*g+B*u+S*d)),r[13]=q*(C*g+B*a+$*d-(N*d+z*g+D*a)),r[14]=q*(N*u+G*g+S*a-(X*g+U*a+$*u)),r[15]=q*(X*d+P*a+z*u-(C*u+G*d+I*a)),r}function F(t,r,e){e=e||new Float32Array(4);for(var n=0;4>n;++n){e[n]=0;for(var a=0;4>a;++a)e[n]+=r[a]*t[4*a+n]}return e}function M(t,r,e){e=e||new Float32Array(3);var n=r[0],a=r[1],o=r[2],i=n*t[3]+a*t[7]+o*t[11]+t[15];return e[0]=(n*t[0]+a*t[4]+o*t[8]+t[12])/i,e[1]=(n*t[1]+a*t[5]+o*t[9]+t[13])/i,e[2]=(n*t[2]+a*t[6]+o*t[10]+t[14])/i,e}function L(t,r,e){e=e||new Float32Array(3);var n=r[0],a=r[1],o=r[2];return e[0]=n*t[0]+a*t[4]+o*t[8],e[1]=n*t[1]+a*t[5]+o*t[9],e[2]=n*t[2]+a*t[6]+o*t[10],e}function B(t,r,e){e=e||new Float32Array(3);var n=T(t),a=r[0],o=r[1],i=r[2];return e[0]=a*n[0]+o*n[1]+i*n[2],e[1]=a*n[4]+o*n[5]+i*n[6],e[2]=a*n[8]+o*n[9]+i*n[10],e}function D(t,r){return r=r||new Float32Array(16),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}return{copy:D,lookAt:f,addVectors:r,subtractVectors:e,distance:c,distanceSq:i,normalize:n,cross:a,dot:o,identity:u,transpose:s,orthographic:d,frustum:h,perspective:l,translation:v,translate:p,xRotation:g,yRotation:x,zRotation:_,xRotate:A,yRotate:R,zRotate:m,axisRotation:y,axisRotate:E,scaling:b,scale:w,multiply:t,inverse:T,transformVector:F,transformPoint:M,transformDirection:L,transformNormal:B}}},48:function(t,r,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function a(t){return t*Math.PI/180}var o,i=e(20),c=n(i),u=e(49),s=n(u),f=e(1),l=n(f),d=e(51),h=n(d),v=e(4),p=n(v),g=(0,c.default)(),A="undefined"!=typeof window,x=function(t){console.error("[Easycanvas-webgl] "+t)},R="\n    attribute vec4 a_position;\n    attribute vec4 a_color;\n    uniform float u_fudgeFactor; // 透射\n\n    uniform mat4 u_matrix;\n\n    varying vec4 v_color;\n\n    void main() {\n        // Multiply the position by the matrix.\n        // gl_Position = u_matrix * a_position;\n\n        // 透射\n        // 调整除数\n        vec4 position = u_matrix * a_position;\n        // 由于裁减空间中的 Z 值是 -1 到 +1 的，所以 +1 是为了让 zToDivideBy 变成 0 到 +2 * fudgeFactor\n        float zToDivideBy = 1.0 + position.z * u_fudgeFactor; // 透射\n        gl_Position = vec4(position.xy / zToDivideBy, position.zw);\n\n        v_color = a_color;\n    }\n",_="\n    attribute vec4 a_position;\n    attribute vec2 a_texcoord;\n    uniform float u_fudgeFactor; // 透射\n\n    uniform mat4 u_matrix;\n\n    varying vec2 v_texcoord;\n\n    void main() {\n        // Multiply the position by the matrix.\n        // gl_Position = u_matrix * a_position;\n\n        // 透射\n        // 调整除数\n        vec4 position = u_matrix * a_position;\n        // 由于裁减空间中的 Z 值是 -1 到 +1 的，所以 +1 是为了让 zToDivideBy 变成 0 到 +2 * fudgeFactor\n        float zToDivideBy = 1.0 + position.z * u_fudgeFactor; // 透射\n        gl_Position = vec4(position.xy / zToDivideBy, position.zw);\n\n        v_texcoord = a_texcoord;\n    }\n",m="\n    precision mediump float;\n\n    varying vec2 v_texcoord;\n\n    uniform sampler2D u_texture;\n\n    void main() {\n       gl_FragColor = texture2D(u_texture, v_texcoord);\n    }\n",y="\n    precision mediump float;\n\n    varying vec4 v_color;\n\n    uniform sampler2D u_texture;\n\n    void main() {\n       gl_FragColor = v_color;\n    }\n",E=function(){var t={};return function(r,e,n){if(t[e])return t[e];var a=r.createShader(n);if(r.shaderSource(a,e),r.compileShader(a),!r.getShaderParameter(a,r.COMPILE_STATUS)){var o=r.getShaderInfoLog(a);throw"Could not compile WebGL program. \n\n"+o}return t[e]=a,a}}(),b=function(t,r,e){var n=t.createProgram();if(t.attachShader(n,r),t.attachShader(n,e),t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS)){var a=t.getProgramInfoLog(n);throw"Could not compile WebGL program. \n\n"+a}return n},w=function(){var t;return function(r,e){if(t!==e){t=e;var n,a;0===e?(n=E(r,R,r.VERTEX_SHADER),a=E(r,y,r.FRAGMENT_SHADER)):(n=E(r,_,r.VERTEX_SHADER),a=E(r,m,r.FRAGMENT_SHADER)),r.program=b(r,n,a),r.useProgram(r.program),r.positionLocation=r.getAttribLocation(r.program,"a_position"),0===e?r.colorLocation=r.getAttribLocation(r.program,"a_color"):r.texcoordLocation=r.getAttribLocation(r.program,"a_texcoord"),r.matrixLocation=r.getUniformLocation(r.program,"u_matrix"),0===e?r.textureLocation=r.getUniformLocation(r.program,"u_texture"):r.textureMatrixLocation=r.getUniformLocation(r.program,"u_textureMatrix"),r.enableVertexAttribArray(r.positionLocation),r.enableVertexAttribArray(r.texcoordLocation),r.enableVertexAttribArray(r.colorLocation)}}}(),T={},F=function(t,r,e){var n=t.props,a=t.webgl,o=e.$gl;if("3d"!==t.type){if(!n[0]&&n.content){var i=n.content+n.font+n.align+n.color,c=T[i];if(!c){var u=o.createTexture(),s=document.createElement("canvas").getContext("2d");s.clearRect(0,0,s.canvas.width,s.canvas.height),s.canvas.width=n.content.length*parseInt(n.font)*2,s.canvas.height=parseInt(n.font)+5,s.font=n.font,s.textAlign=n.align,s.fillStyle=n.color,s.fillText(n.content,"right"===n.align?s.canvas.width:"center"===n.align?s.canvas.width/2:0,s.canvas.height-5),o.bindTexture(o.TEXTURE_2D,u),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,s.canvas),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),c=T[i]={texture:u,width:s.canvas.width,height:s.canvas.height,img:s.canvas,canvas:s.canvas}}n=[c,0,0,c.canvas.width,c.canvas.height,"right"===n.align?n.tx-c.canvas.width:"center"===n.align?n.tx-c.canvas.width/2:n.tx,n.ty-c.canvas.height+5,c.canvas.width,c.canvas.height]}if(n[0]&&n[0].texture){var f=(0,h.default)(n[5],n[6],n[7],n[8],0,0,e.width,e.height,r.beforeRotate&&r.beforeRotate[0],r.beforeRotate&&r.beforeRotate[1],r.rotate);if(!f)return;if(0===n[0].img.width)return;o.bindTexture(o.TEXTURE_2D,n[0].texture),L(e,n[0].texture,n[0].width,n[0].height,n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],r)}}else if("3d"===t.type&&(a.img||a.colors)){a.img&&a.img.texture&&o.bindTexture(o.TEXTURE_2D,a.img.texture);var l=1.8*a.longSide,d=e.webgl.depth,f=(0,h.default)(a.tx-l,a.ty-l,2*l,2*l,a.tz/d*e.width/2,a.tz/d*e.height/2,e.width-a.tz/d*e.width/2,e.height-a.tz/d*e.height/2,0,0,0);if(!f)return;M(e,a)}},M=function(t,r){var e,n,o,i,c=t.$gl;if(r.vertices.$cacheBuffer?e=r.vertices.$cacheBuffer:(e=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,e),c.bufferData(c.ARRAY_BUFFER,r.vertices,c.STATIC_DRAW),r.vertices.$cacheBuffer=e),r.colors?r.colors.$cacheBuffer?n=r.colors.$cacheBuffer:(n=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,n),c.bufferData(c.ARRAY_BUFFER,r.colors,c.STATIC_DRAW),r.colors.$cacheBuffer=n):r.textures.$cacheBuffer?o=r.textures.$cacheBuffer:(o=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,o),c.bufferData(c.ARRAY_BUFFER,r.textures,c.STATIC_DRAW),r.textures.$cacheBuffer=o),r.indices&&(r.indices.$cacheBuffer?i=r.indices.$cacheBuffer:(i=c.createBuffer(),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),c.bufferData(c.ELEMENT_ARRAY_BUFFER,r.indices,c.STATIC_DRAW),r.indices.$cacheBuffer=i)),c.enable(c.CULL_FACE),n){w(c,0),c.bindBuffer(c.ARRAY_BUFFER,n);var u=3,s=c.UNSIGNED_BYTE,f=!0,l=0,d=0;c.vertexAttribPointer(c.colorLocation,u,s,f,l,d)}else if(o){w(c,1),c.bindBuffer(c.ARRAY_BUFFER,o);var u=2,s=c.FLOAT,f=!1,l=0,d=0;c.vertexAttribPointer(c.texcoordLocation,u,s,f,l,d)}if(r.vertices){c.bindBuffer(c.ARRAY_BUFFER,e);var u=3,s=c.FLOAT,f=!1,l=0,d=0;c.vertexAttribPointer(c.positionLocation,u,s,f,l,d)}if(t.webgl.fudgeFactor){var h=c.getUniformLocation(c.program,"u_fudgeFactor"),v=t.webgl.fudgeFactor;c.uniform1f(h,v)}var p=c.orthographic;p=g.translate(p,r.tx||0,r.ty||0,r.tz||0),p=g.xRotate(p,a(r.rx)||0),p=g.yRotate(p,a(r.ry)||0),p=g.zRotate(p,a(r.rz)||0),p=g.scale(p,r.scaleX||1,r.scaleY||1,r.scaleZ||1);var A=p;c.uniformMatrix4fv(c.matrixLocation,!1,A),c.uniform1i(c.textureLocation,0),i?(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),c.drawElements(c.TRIANGLES,r.indices.length,c.UNSIGNED_SHORT,0)):c.drawArrays(c.TRIANGLES,0,r.vertices.length/3)},L=function(t,r,e,n,a,i,c,u,s,f,l,d,h){var v=t.$gl;if(w(v,1),!o){o=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,o);var p=[0,0,0,1,1,0,1,0,0,1,1,1];v.bufferData(v.ARRAY_BUFFER,new Float32Array(p),v.STATIC_DRAW)}v.bindBuffer(v.ARRAY_BUFFER,o),v.vertexAttribPointer(v.positionLocation,2,v.FLOAT,!1,0,0),v.vertexAttribPointer(v.texcoordLocation,2,v.FLOAT,!1,0,0);var A=v.orthographic;if(A=g.translate(A,s,f,0),h.rotate&&(A=g.translate(A,-s+h.beforeRotate[0]||0,-f+h.beforeRotate[1]||0,0),A=g.zRotate(A,h.rotate),A=g.translate(A,s+h.afterRotate[0]||0,f+h.afterRotate[1]||0,0)),A=g.scale(A,l,d,1),v.uniformMatrix4fv(v.matrixLocation,!1,A),a||i||c!==e||u!==n){var x=g.translation(a/e,i/n,0);x=g.scale(x,c/e,u/n,1),v.uniformMatrix4fv(v.textureMatrixLocation,!1,x)}v.drawArrays(v.TRIANGLES,0,6)},B=function(t,r){t.$isWebgl=!0,t.webgl={depth:r.webgl.depth||1e4,fudgeFactor:r.webgl.fudgeFactor||0,camera:r.webgl.camera};var e=t.$gl=t.$paintContext;e.orthographic=g.orthographic(0,t.width,t.height,0,-t.webgl.depth,t.webgl.depth),e.clearColor(0,0,0,0),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),w(e,0),t.imgLoader=function(t,r){var n=e.createTexture(),a={width:0,height:0};return(0,p.default)(t,function(t){function o(t){var o=new Image;o.addEventListener("load",function(){a.width=o.width,a.height=o.height,a.texture=n,a.img=o,e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),r&&r(a)}),o.src=t}o(t,r)}),a}},D=function(t){t.webgl&&(this.$paintContext=this.$dom.getContext("webgl",{alpha:!0,premultipliedAlpha:!1}),this.$paintContext?B(this,t):("production"!==process.env.NODE_ENV&&x("Webgl is not supported in current browser, using canvas2d instead."),t.webgl.fallback&&t.webgl.fallback.call(this)))},U=function(){var t=this,r=this.$canvas;if(t.webgl){t.$rendered=!0;var e={tx:t.getStyle("tx"),ty:t.getStyle("ty"),tz:l.default.funcOrValue(t.webgl.tz,t)||0};for(var n in t.webgl)e[n]=l.default.funcOrValue(t.webgl[n],t)||0;var a={$id:t.$id,type:"3d",webgl:e};"production"!==process.env.NODE_ENV&&(a.$origin=t),r.$children.push(a)}},S=function(t,r){var e=this;if(e.$isWebgl)return F(t,r,e),!0},P={onCreate:D,onPaint:U,onRender:S,webglShapes:s.default};A&&window.Easycanvas?(Easycanvas.use(P),Easycanvas.webglShapes=s.default):t.exports=P},49:function(t,r){"use strict";function e(t,r){for(var e=[],n=1;r>=n;n++)e=e.concat(t);return e}var n=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),a=new Float32Array(e([0,0,0,1,1,1,1,0],6)),o={icosahedron:{vertices:[0,0,-1.902,0,0,1.902,-1.701,0,-.8507,1.701,0,.8507,1.376,-1,-.8507,1.376,1,-.8507,-1.376,-1,.8507,-1.376,1,.8507,-.5257,-1.618,-.8507,-.5257,1.618,-.8507,.5257,-1.618,.8507,.5257,1.618,.8507],indices:[[1,11,7],[1,7,6],[1,6,10],[1,10,3],[1,3,11],[4,8,0],[5,4,0],[9,5,0],[2,9,0],[8,2,0],[11,9,7],[7,2,6],[6,8,10],[10,4,3],[3,5,11],[4,10,8],[5,3,4],[9,11,5],[2,7,9],[8,6,2]]}},i=function(){var t={};return function(r,i){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],u=r+i.join(",")+c.join(","),s={};if("quadrilateral"===r);else if("icosahedron"===r){var f=t[u+"v"]||new Float32Array(o[r].vertices.map(function(t){return t*i[0]/2})),l=t[u+"l"]||Math.max(Math.max.apply(void 0,f),-Math.min.apply(void 0,f));if(s.vertices=t[u+"v"]=f,s.indices=new Uint16Array(o[r].indices.join(",").split(",")),s.textures=t[u+"t"],!s.textures){s.textures=[];for(var d=0;s.indices.length>d;d++)s.textures.push(Math.random().toFixed(2));s.textures=t[u+"t"]=new Float32Array(s.textures)}s.longSide=t[u+"l"]=l}else if("block"===r){var h=i[0]/2,v=i[1]/2,p=i[2]/2,f=t[u+"v"]||new Float32Array([h,v,p,-h,v,p,-h,-v,p,h,-v,p,h,v,p,h,-v,p,h,-v,-p,h,v,-p,h,v,p,h,v,-p,-h,v,-p,-h,v,p,-h,v,p,-h,v,-p,-h,-v,-p,-h,-v,p,-h,-v,-p,h,-v,-p,h,-v,p,-h,-v,p,h,-v,-p,-h,-v,-p,-h,v,-p,h,v,-p]),l=t[u+"l"]||Math.max(Math.max.apply(void 0,f),-Math.min.apply(void 0,f));s.vertices=t[u+"v"]=f,s.indices=n,s.textures=a,s.longSide=t[u+"l"]=l}else if("ball"===r){var g=t[u+"v"]||[],A=t[u+"i"]||[],x=t[u+"t"]||[];if(!g.length){for(var R=[],_=i[0],m=i[1],y=i[2],E=0;m>=E;E++)for(var b=E*Math.PI/m,w=Math.sin(b),T=Math.cos(b),F=0;y>=F;F++){var M=2*F*Math.PI/y,L=Math.sin(M),B=Math.cos(M),D=B*w,U=T,S=L*w,P=1-F/y,I=1-E/m;R.push(D),R.push(U),R.push(S),x.push(P),x.push(I),g.push(_*D),g.push(_*U),g.push(_*S)}for(var E=0;m>E;E++)for(var F=0;y>F;F++){var N=E*(y+1)+F,$=N+y+1;A.push(N),A.push($),A.push(N+1),A.push($),A.push($+1),A.push(N+1)}t[u+"v"]=new Float32Array(g),t[u+"i"]=new Uint16Array(A),t[u+"t"]=new Float32Array(x),t[u+"l"]=Math.max(Math.max.apply(void 0,f),-Math.min.apply(void 0,g))}s.vertices=t[u+"v"],s.indices=t[u+"i"],s.textures=t[u+"t"],s.longSide=t[u+"l"]}if(c.length&&(s.colors=t[u+"c"],!s.colors)){var C=s.vertices.length/c.length;C>1&&(s.colors=new Uint8Array(e(c,Math.ceil(C)))),t[u+"c"]=s.colors}return s}}(),c=function(t,r){for(var e in r)t[e]||(t[e]=r[e]);return t},u={block:function(t){var r=i("block",[t.a,t.b,t.c],t.colors);return c(r,t)},quadrilateral:function(t){var r=i("quadrilateral",[t.a,t.b,t.c],t.colors);return c(r,t)},ball:function(t){var r=i("ball",[t.r,t.b||t.lat||20,t.b||t.lng||20],t.colors);return c(r,t)},icosahedron:function(t){var r=i("icosahedron",[t.r],t.colors);return c(r,t)}};t.exports=u},51:function(t,r,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var a=e(3),o=n(a);t.exports=function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments[4],i=arguments[5],c=arguments[6],u=arguments[7],s=arguments[8],f=arguments[9],l=arguments[10],d=t+e/2,h=r+n/2,v=Math.max(e,n)+Math.max(c,u);if(l){var p=(0,o.default)(d,h,s,f,l);d=p.x,h=p.y}return Math.pow(d-(a+c/2),2)+Math.pow(h-(i+i/2),2)<Math.pow(v,2)}}})});